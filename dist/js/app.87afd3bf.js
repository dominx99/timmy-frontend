(function(t){function e(e){for(var a,n,i=e[0],l=e[1],d=e[2],c=0,m=[];c<i.length;c++)n=i[c],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,d||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},o=[];function n(t){return i.p+"js/"+({icons:"icons"}[t]||t)+"."+{icons:"eac20573"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.e=function(t){var e=[],s=r[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise((function(e,a){s=r[t]=[e,a]}));e.push(s[2]=a);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=n(t);var d=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(c);var s=r[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",d.name="ChunkLoadError",d.type=a,d.request=o,s[1](d)}r[t]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=d;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),r=s.n(a);r.a},"1c8c":function(t,e,s){"use strict";var a=s("6156"),r=s.n(a);r.a},"1ccf":function(t,e,s){"use strict";var a=s("ea57"),r=s.n(a);r.a},3411:function(t,e,s){var a={"./cancel.svg":"b463","./left-arrow.svg":"6d4b","./loupe-fail.svg":"6c80","./pause.svg":"644b","./play.svg":"dab1","./plus.svg":"eb38","./right-arrow.svg":"c686","./tick.svg":"812c"};function r(t){return o(t).then((function(t){return s.t(t,7)}))}function o(t){return s.e("icons").then((function(){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}))}r.keys=function(){return Object.keys(a)},r.resolve=o,r.id="3411",t.exports=r},"34f6":function(t,e,s){},"401d":function(t,e,s){},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=o(t);return s(e)}function o(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],n=(s("034f"),s("2877")),i={},l=Object(n["a"])(i,r,o,!1,null,null,null),d=l.exports,c=s("8c4f"),u=s("782e"),m=s.n(u),p=s("4a7a"),h=s.n(p),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(t.dynamicIcon,{tag:"component"})},v=[],b={name:"DynamicIcon",props:{icon:{type:String,required:!0}},watch:{icon(t){this.icon=t,this.$forceUpdate}},computed:{dynamicIcon(){return()=>s("3411")(`./${this.icon}.svg`)}}},g=b,w=Object(n["a"])(g,f,v,!1,null,null,null),y=w.exports,j=(s("6dfc"),s("401d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"auth-container"},[s("div",{staticClass:"auth"},[s("div",{staticClass:"auth-header"},[s("router-link",{class:"btn bg-white rounded-tl",attrs:{tag:"button",to:"/login"}},[t._v("Login")]),s("router-link",{class:"btn bg-indigo-900 text-white rounded-tr",attrs:{tag:"button",to:"/register"}},[t._v("Register")])],1),s("div",{staticClass:"auth-body"},[t.error.show?s("div",{staticClass:"auth-error",domProps:{textContent:t._s(t.error.message)}}):t._e(),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"login"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.email,expression:"auth.email"}],attrs:{type:"email"},domProps:{value:t.auth.email},on:{input:function(e){e.target.composing||t.$set(t.auth,"email",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"login"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.password,expression:"auth.password"}],attrs:{type:"password"},domProps:{value:t.auth.password},on:{input:function(e){e.target.composing||t.$set(t.auth,"password",e.target.value)}}})])]),s("div",{staticClass:"auth-footer"},[s("button",{staticClass:"btn bg-indigo-900 text-white rounded-b",on:{click:function(e){return t.login()}}},[t._v("Login")])])])])}),x=[],C={data(){return{auth:{email:"",password:""},error:{message:"",show:!1}}},methods:{async login(){this.error.show=!1;try{let t=await this.$store.dispatch("auth/login",{email:this.auth.email,password:this.auth.password});localStorage.setItem("access_token",t.data.data.access_token),this.$router.push({name:"day"})}catch(t){this.showError("Wrong credentials.")}},showError(t){this.error.message=t,this.error.show=!0}}},M=C,_=Object(n["a"])(M,j,x,!1,null,null,null),D=_.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"auth-container"},[s("div",{staticClass:"auth"},[s("div",{staticClass:"auth-header"},[s("router-link",{staticClass:"active",class:"btn bg-indigo-900 text-white rounded-tl",attrs:{tag:"button",to:"/login"}},[t._v("Login")]),s("router-link",{class:"btn bg-white rounded-tr",attrs:{tag:"button",to:"/register"}},[t._v("Register")])],1),s("div",{staticClass:"auth-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.email,expression:"auth.email"}],attrs:{id:"email",type:"email"},domProps:{value:t.auth.email},on:{input:function(e){e.target.composing||t.$set(t.auth,"email",e.target.value)}}}),s("span",{staticClass:"error-message",domProps:{textContent:t._s(t.errors.email?t.errors.email[0]:"")}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.auth.password,expression:"auth.password"}],attrs:{id:"password",type:"password"},domProps:{value:t.auth.password},on:{input:function(e){e.target.composing||t.$set(t.auth,"password",e.target.value)}}}),s("span",{staticClass:"error-message",domProps:{textContent:t._s(t.errors.password?t.errors.password[0]:"")}})])]),s("div",{staticClass:"auth-footer"},[s("button",{staticClass:"btn bg-indigo-900 text-white rounded-b",on:{click:function(e){return t.register()}}},[t._v("Register")])])])])},k=[],P={data(){return{auth:{email:"",password:""},errors:{email:[],password:[]}}},methods:{async register(){try{let t=await this.$store.dispatch("auth/register",{email:this.auth.email,password:this.auth.password});localStorage.setItem("access_token",t.data.data.token),this.$router.push({name:"day"})}catch(t){console.error(t.response),this.errors=t.response.data.errors}}}},T=P,S=(s("1ccf"),Object(n["a"])(T,$,k,!1,null,null,null)),Y=S.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"min-h-screen bg-gradient-purple-blue text-white"},[s("Toasts"),s("CreatePlanModal"),s("CreateTimeMeterModal"),s("Navigation",{attrs:{title:t.title}}),s("div",{staticClass:"container ml-auto mr-auto"},[t.emptyPlans()?s("PlansNotFound"):s("PlansList")],1),s("PlansFloatingButton")],1)},E=[],I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fixed flex flex-col mr-5 mt-5 z-30",class:t.positionClass},t._l(t.toasts,(function(t){return s("Toast",{key:t.id,attrs:{message:t.message,type:t.type}})})),1)},A=[],H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-row p-4 mb-2 rounded shadow-md items-center justify-start",class:t.typeClass},[s("div",["success"==t.type?s("d-svg",{staticClass:"mr-4 text-green-100 fill-current",staticStyle:{width:"20px",height:"20px"},attrs:{icon:"tick"}}):"danger"==t.type?s("d-svg",{staticClass:"mr-4 text-green-100 fill-current",staticStyle:{width:"20px",height:"20px"},attrs:{icon:"cancel"}}):t._e()],1),s("div",{domProps:{textContent:t._s(t.message)}})])},N=[],z={props:["message","type"],computed:{typeClass(){let t={};return"success"==this.type&&(t["bg-green-500"]=!0),"danger"==this.type&&(t["bg-red-500"]=!0),t}}},L=z,U=Object(n["a"])(L,H,N,!1,null,null,null),V=U.exports,B={components:{Toast:V},data(){return{position:"top-right"}},computed:{toasts(){return this.$store.state.toasts.toasts},positionClass(){let t={};switch(this.position){case"top-right":t={"top-0":!0,"right-0":!0};break;case"bottom-left":t={"bottom-0":!0,"left-0":!0};break;default:t={"top-0":!0,"right-0":!0};break}return t}}},F=B,R=Object(n["a"])(F,I,A,!1,null,null,null),q=R.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"mb-6"},[s("div",{staticClass:"container ml-auto mr-auto p-5 flex justify-between items-center"},[s("button",{on:{click:function(e){return t.previous()}}},[s("Dsvg",{staticClass:"white fill-current",staticStyle:{width:"30px"},attrs:{icon:"left-arrow"}})],1),s("div",{staticClass:"text-2xl",domProps:{textContent:t._s(t.title)}}),s("button",{on:{click:function(e){return t.setStep("day")}}},[t._v("Day")]),s("button",{on:{click:function(e){return t.setStep("week")}}},[t._v("Week")]),s("button",{on:{click:function(e){return t.setStep("month")}}},[t._v("Month")]),s("button",{on:{click:function(e){return t.next()}}},[s("Dsvg",{staticClass:"white fill-current",staticStyle:{width:"30px"},attrs:{icon:"right-arrow"}})],1)])])},J=[],G={props:["title"],components:{Dsvg:y},computed:{period(){return this.$store.state.view.activePeriod}},methods:{previous(){this.$store.dispatch("view/previous"),this.$store.commit("plans/clear"),this.$store.dispatch("plans/loadByPeriod",this.period)},next(){this.$store.dispatch("view/next"),this.$store.commit("plans/clear"),this.$store.dispatch("plans/loadByPeriod",this.period)},setStep(t){this.$store.dispatch("view/setActivePeriod",t),this.$store.commit("view/setActiveStep",`${t}s`),this.$store.dispatch("plans/loadByPeriod",this.period)}}},K=G,Q=Object(n["a"])(K,W,J,!1,null,null,null),X=Q.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-col md:flex-row md:flex-wrap"},t._l(t.plans,(function(t,e){return s("Plan",{key:e,attrs:{plan:t}})})),1)},tt=[],et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.cardClass()},[s("div",{staticClass:"ml-8 mr-3 flex items-center justify-center"},[s("button",{staticClass:"flex justify-center items-center shadow-md",staticStyle:{width:"50px",height:"50px","border-radius":"100%"},on:{click:function(e){return t.toggle()}}},[s("d-svg",{directives:[{name:"show",rawName:"v-show",value:!0===t.played,expression:"played === true"}],staticClass:"fill-current text-white",staticStyle:{width:"30%"},attrs:{icon:"pause"}}),s("d-svg",{directives:[{name:"show",rawName:"v-show",value:!1===t.played,expression:"played === false"}],staticClass:"fill-current text-white",staticStyle:{width:"30%"},attrs:{icon:"play"}})],1)]),s("div",{staticClass:"w-full p-5"},[s("div",{domProps:{textContent:t._s(t.plan.timeMeter.name)}}),s("div",{staticClass:"text-sm text-gray-200",domProps:{textContent:t._s(t.passedTime)}}),s("div",{staticClass:"text-sm text-gray-200",domProps:{textContent:t._s(t.period())}}),s("div",{staticClass:"text-sm text-gray-200",domProps:{textContent:t._s(t.duration())}})])])},st=[],at={props:["plan"],components:{"d-svg":y},data(){return{played:!1,passedTime:"00:00:00",passedTimeInterval:null,disabled:!1}},computed:{now(){return this.$store.state.time.now}},mounted(){this.setDisabled(),this.setPlayed(),this.updatePassedTime(),this.played&&this.scheduleUpdatePassedTime()},methods:{setDisabled(){this.disabled=this.$moment(this.now).isAfter(this.plan.endDate)},cardClass(){return{card:!0,"card-archived":this.disabled}},updatePassedTime(){this.passedTime=this.time(this.calculateMeasurements())},scheduleUpdatePassedTime(){this.passedTimeInterval=setInterval(this.updatePassedTime,1e3)},stopUpdatePassedTime(){clearInterval(this.passedTimeInterval)},calculateMeasurements(){let t=0;return this.plan.measurements.forEach(e=>{t+=this.calculateDiff(e.stopped_at,e.created_at)}),t},calculateDiff(t,e){return null===t&&(t=this.now),this.$moment(t).diff(e,"seconds")},period(){return"From "+this.time(this.plan.minTime)+" to "+this.time(this.plan.maxTime)},setPlayed(){this.played=this.plan.measurements.some(t=>"started"===t.status)},async stop(){let t=await this.$store.dispatch("measurements/stop",this.plan.id);t&&(await this.$store.dispatch("plans/fetchMeasurements",this.plan.id),this.updatePassedTime(),this.stopUpdatePassedTime(),this.toggleIcon())},async start(){let t=await this.$store.dispatch("measurements/start",this.plan.id);t&&(await this.$store.dispatch("plans/fetchMeasurements",this.plan.id),this.scheduleUpdatePassedTime(),this.toggleIcon())},toggle(){this.played?this.stop():this.start()},toggleIcon(){a["a"].set(this,"played",!this.played)},duration(){let t="Starts at "+this.$moment(this.plan.startDate).format("DD/MM/YY"),e="Ends "+this.$moment(this.plan.endDate).format("DD/MM/YY");return t+" "+e},time(t){return this.$moment().startOf("day").seconds(t).format("HH:mm:ss")}}},rt=at,ot=(s("aaef"),Object(n["a"])(rt,et,st,!1,null,null,null)),nt=ot.exports,it={components:{Plan:nt},computed:{plans(){return this.$store.state.plans.plans}}},lt=it,dt=Object(n["a"])(lt,Z,tt,!1,null,null,null),ct=dt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"open"}),s("div",{staticClass:"floating-button flex justify-center items-center fixed bg-blue-500 right-0 bottom-0 mr-5 mb-5 rounded shadow-md",staticStyle:{width:"60px",height:"60px","border-radius":"100%"},on:{click:t.toggle}},[s("d-svg",{staticClass:"text-gray-100 fill-current transition-transform duration-200 easy-in-out",class:{rotated:t.opened},staticStyle:{width:"25px",height:"25px","pointer-events":"none"},attrs:{icon:"plus"}})],1),t.opened?s("div",{staticClass:"fixed flex flex-col justify-end items-end mb-5",staticStyle:{bottom:"calc(60px + 1.25rem)",right:"1.25rem",height:"300px"}},[s("div",{staticClass:"bg-blue-500 rounded px-5 py-2 mb-3 shadow-md open-modal-button",staticStyle:{width:"fit-content"},on:{click:function(e){return t.$bus.$emit("openCreatePlanModal")}}},[t._v(" Plan ")]),s("div",{staticClass:"bg-blue-500 rounded px-5 py-2 mb-3 shadow-md open-modal-button",staticStyle:{width:"fit-content"}},[t._v(" Task ")]),s("div",{staticClass:"bg-blue-500 rounded px-5 py-2 shadow-md open-modal-button",staticStyle:{width:"fit-content"},on:{click:function(e){return t.$bus.$emit("openCreateTimeMeterModal")}}},[t._v(" Time meter ")])]):t._e()])},mt=[],pt={components:{"d-svg":y},data(){return{opened:!1}},methods:{bindCloseAtClickAnywhere(){document.querySelector("body").addEventListener("click",t=>{this.opened&&(t.target.classList.contains("floating-button")||t.target.classList.contains("open-modal-button")||(this.opened=!1))})},toggle(){a["a"].set(this,"opened",!this.opened)}},mounted(){this.bindCloseAtClickAnywhere()}},ht=pt,ft=(s("1c8c"),Object(n["a"])(ht,ut,mt,!1,null,"6d6a599a",null)),vt=ft.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex justify-center items-center h-full",staticStyle:{height:"calc(100vh - 100px)"}},[s("DSvg",{staticClass:"gray-700 fill-current",staticStyle:{width:"250px"},attrs:{icon:"loupe-fail"}})],1)},gt=[],wt={components:{DSvg:y}},yt=wt,jt=Object(n["a"])(yt,bt,gt,!1,null,null,null),xt=jt.exports,Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showModal?s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-top"},[s("div",{staticClass:"modal-header"},[t._v("Create Plan")]),s("d-svg",{staticClass:"close-icon",attrs:{icon:"cancel"},nativeOn:{click:function(e){return t.closeModal()}}})],1),s("div",{staticClass:"modal-body w-full mt-12"},[s("div",{staticClass:"mb-5"},[s("Label",{attrs:{id:"timeMeters",value:"Time meter"}}),s("v-select",{staticClass:"style-chooser",attrs:{id:"timeMeters",label:"name",options:t.timeMeters,reduce:function(t){return t.id}},model:{value:t.form.timeMeterId,callback:function(e){t.$set(t.form,"timeMeterId",e)},expression:"form.timeMeterId"}})],1),s("div",{staticClass:"mb-5"},[s("Label",{attrs:{id:"period",value:"Period"}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.period,expression:"form.period"}],staticClass:"form-input",attrs:{id:"period"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"period",e.target.multiple?s:s[0])}}},t._l(t.periods,(function(e,a){return s("option",{key:a,domProps:{value:e.value,textContent:t._s(e.name)}})})),0)],1),s("div",{staticClass:"flex flex-row flex-wrap"},[s("div",{staticClass:"w-1/2 pr-3 mb-6"},[s("Label",{attrs:{id:"minTime",value:"Min time (in mins)"}}),s("NumberInput",{attrs:{id:"minTime",step:15,placeholder:"15"},model:{value:t.form.minTime,callback:function(e){t.$set(t.form,"minTime",e)},expression:"form.minTime"}})],1),s("div",{staticClass:"w-1/2 pl-3"},[s("Label",{attrs:{id:"maxTime",value:"Max time (in mins)"}}),s("NumberInput",{attrs:{id:"maxTime",step:"15",placeholder:"30"},model:{value:t.form.maxTime,callback:function(e){t.$set(t.form,"maxTime",e)},expression:"form.maxTime"}})],1)])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn bg-blue-500 rounded ml-auto",attrs:{type:"button"},on:{click:t.save}},[t._v("Save")])])])])]):t._e()},Mt=[],_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputVal,expression:"inputVal",modifiers:{number:!0}}],staticClass:"\n    block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight\n    focus:outline-none focus:bg-white focus:border-gray-500\n  ",attrs:{type:"number",step:t.step?t.step:1,min:t.min?t.min:0,max:t.max,placeholder:t.placeholder},domProps:{value:t.inputVal},on:{input:function(e){e.target.composing||(t.inputVal=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})},Dt=[],$t={props:["value","step","placeholder","min","max"],computed:{inputVal:{get(){return this.value},set(t){this.$emit("input",t)}}}},kt=$t,Pt=Object(n["a"])(kt,_t,Dt,!1,null,null,null),Tt=Pt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"block uppercase tracking-wide text-gray-100 text-xs font-bold mb-2",attrs:{for:t.id},domProps:{textContent:t._s(t.value)}})},Yt=[],Ot={props:["id","value"]},Et=Ot,It=Object(n["a"])(Et,St,Yt,!1,null,null,null),At=It.exports,Ht={components:{DSvg:y,NumberInput:Tt,Label:At},computed:{timeMeters(){return this.$store.state.timeMeters.timeMeters}},data(){return{showModal:!1,form:{period:{},minTime:"",maxTime:"",timeMeterId:""},periods:[]}},mounted(){this.$store.dispatch("timeMeters/get"),this.preparePeriods()},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},clearModal(){this.form={minTime:"",maxTime:"",timeMeterId:""},this.form.period=this.periods[0].value},save(){let t=this.form;t.startDate=t.period.startDate,t.endDate=t.period.endDate,this.$store.dispatch("plans/add",t),this.closeModal(),this.clearModal()},preparePeriods(){let t={sameDay:"[Today]",nextDay:"[Tommorow]"},e="YYYY-MM-DD HH:mm:ss",s=[{value:this.$moment().startOf("day"),step:"day"},{value:this.$moment().startOf("day").add(1,"day"),step:"day"},{value:this.$moment().startOf("week"),step:"week",name:"This week"},{value:this.$moment().startOf("week").add(1,"week"),step:"week",name:"Next week"},{value:this.$moment().startOf("month"),step:"month",name:"This month"},{value:this.$moment().startOf("month").add(1,"month"),step:"month",name:"Next month"}];for(let a=0;a<s.length;a++)this.periods.push({name:"undefined"!==typeof s[a].name?s[a].name:s[a].value.calendar(null,t),value:{startDate:s[a].value.startOf(s[a].step).format(e),endDate:s[a].value.endOf(s[a].step).format(e)}});this.form.period=this.periods[0].value}},created(){this.$bus.$on("openCreatePlanModal",this.openModal)},beforeDestroy(){this.$bus.$off("openCreatePlanModal",this.openModal)}},Nt=Ht,zt=Object(n["a"])(Nt,Ct,Mt,!1,null,null,null),Lt=zt.exports,Ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showModal?s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-top"},[s("div",{staticClass:"modal-header"},[t._v("Create Time Meter")]),s("d-svg",{staticClass:"close-icon",attrs:{icon:"cancel"},nativeOn:{click:function(e){return t.closeModal()}}})],1),s("div",{staticClass:"modal-body w-full mt-12"},[s("div",{staticClass:"mb-5"},[s("Label",{attrs:{id:"name",value:"Name"}}),s("TextInput",{attrs:{id:"name",placeholder:"School"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn bg-blue-500 rounded ml-auto",attrs:{type:"button"},on:{click:t.save}},[t._v("Save")])])])])]):t._e()},Vt=[],Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputVal,expression:"inputVal",modifiers:{number:!0}}],staticClass:"\n    block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight\n    focus:outline-none focus:bg-white focus:border-gray-500\n  ",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.inputVal},on:{input:function(e){e.target.composing||(t.inputVal=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})},Ft=[],Rt={props:["value","step","placeholder","min","max"],computed:{inputVal:{get(){return this.value},set(t){this.$emit("input",t)}}}},qt=Rt,Wt=Object(n["a"])(qt,Bt,Ft,!1,null,null,null),Jt=Wt.exports,Gt={components:{DSvg:y,TextInput:Jt,Label:At},data(){return{showModal:!1,form:{name:""},periods:[]}},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},clearModal(){this.form={name:""}},save(){this.$store.dispatch("timeMeters/add",this.form),this.closeModal(),this.clearModal()}},created(){this.$bus.$on("openCreateTimeMeterModal",this.openModal)},beforeDestroy(){this.$bus.$off("openCreateTimeMeterModal",this.openModal)}},Kt=Gt,Qt=Object(n["a"])(Kt,Ut,Vt,!1,null,null,null),Xt=Qt.exports,Zt=s("2f62"),te={components:{Navigation:X,PlansList:ct,PlansFloatingButton:vt,PlansNotFound:xt,CreatePlanModal:Lt,CreateTimeMeterModal:Xt,Toasts:q},computed:{...Object(Zt["b"])("view",["title"]),period(){return this.$store.state.view.activePeriod},step(){return this.$store.state.view.activeStep}},mounted(){console.log("env",Object({NODE_ENV:"production",VUE_APP_API_URL:"http://timmy.test",BASE_URL:"/"})),this.configureServerTime(),this.configureActivePeriod(),this.configureActiveStep(),this.$store.dispatch("plans/loadByPeriod",this.period)},methods:{emptyPlans(){return this.$store.state.plans.plans<=0},sameDay(t,e){return this.$moment(t).isSame(this.$moment(e).format("YYYY-MM-DD HH:mm:ss"),"day")},configureServerTime(){this.$store.dispatch("time/fetch"),setInterval(()=>this.$store.commit("time/addSecond"),1e3)},configureActivePeriod(){let t=this.$moment().startOf("day"),e=this.$moment().endOf("day");this.$store.commit("view/setActivePeriod",{startDate:t.format("YYYY-MM-DD HH:mm:ss"),endDate:e.format("YYYY-MM-DD HH:mm:ss")})},configureActiveStep(){this.$store.commit("view/setActiveStep","days")}}},ee=te,se=Object(n["a"])(ee,O,E,!1,null,null,null),ae=se.exports;async function re({next:t,router:e}){let s=localStorage.getItem("access_token");return null!==s&&void 0!==s&&""!==s?e.push({name:"lobby"}):t()}async function oe({next:t,router:e}){let s=localStorage.getItem("access_token");return null===s||"undefined"===typeof s||""===s?e.push({name:"login"}):t()}var ne=[{path:"/",component:ae,name:"day",meta:{middleware:oe}},{path:"/login",component:D,name:"login",meta:{middleware:re}},{path:"/register",component:Y,name:"register",meta:{middleware:re}}],ie={namespaced:!0,state:{token:localStorage.getItem("access_token")||""},actions:{login(t,e){return window.axios.post("v1/auth/login",{email:e.email,password:e.password,grant_type:"credentials"})},register(t,e){return window.axios.post("v1/auth/register",{email:e.email,password:e.password})}}},le={namespaced:!0,state:{user:{}},actions:{async get({commit:t}){let e=await window.axios.get("api/user");t("setUser",e.data.data)}},mutations:{setUser(t,e){t.user.id=e.id,t.user.email=e.email}}},de={namespaced:!0,state:{timeMeters:[]},actions:{async add({dispatch:t},{name:e}){try{await window.axios.post("v1/time-meters",{name:e})}catch(s){t("toasts/error",s,{root:!0})}},async get({commit:t}){try{let e=await window.axios.get("v1/time-meters");t("setTimeMeters",e.data.data)}catch(e){console.error(e)}}},mutations:{setTimeMeters(t,e){t.timeMeters=e}}},ce=s("c1df"),ue=s.n(ce),me={namespaced:!0,state:{plans:[]},actions:{async loadByPeriod({commit:t},{startDate:e,endDate:s}){try{let a=await window.axios({url:"v1/plans/by/period",params:{startDate:e,endDate:s}});t("setPlans",a.data.data)}catch(a){console.error(a)}},async loadByDate({commit:t},e){try{let s=await window.axios({url:"v1/plans/by/date",params:{date:e}});t("setPlans",s.data.data)}catch(s){console.error(s)}},async add({dispatch:t},e){try{await window.axios.post("v1/plans",e),t("loadByDate",ue()().format("YYYY-MM-DD HH:mm:ss")),t("toasts/success","Successfuly created plan.",{root:!0})}catch(s){console.error(s),t("toasts/error",s,{root:!0})}},async fetchMeasurements({dispatch:t,commit:e},s){try{let t=await window.axios.get(`v1/plans/${s}/measurements`),a=t.data.data;e("setMeasurements",{planId:s,measurements:a})}catch(a){console.error(a),t("toasts/error",a,{root:!0})}}},mutations:{setPlans(t,e){a["a"].set(t,"plans",[...e])},clear(t){a["a"].set(t,"plans",[])},setMeasurements(t,{planId:e,measurements:s}){let a=t.plans.find(t=>t.id===e);a&&(a.measurements=s)}}},pe={namespaced:!0,state:{toasts:[]},actions:{success({dispatch:t},e){t("add",{type:"success",lifetime:ue()().add(8,"seconds"),message:e})},danger({dispatch:t},e){t("add",{type:"danger",lifetime:ue()().add(8,"seconds"),message:e})},error({dispatch:t},e){"undefined"!==typeof e.response&&"undefined"!==typeof e.response.data.error&&t("danger",e.response.data.error)},add({commit:t},e){t("addToast",Object.assign({},e,{id:Math.random().toString(36).substr(2,9)})),setInterval(()=>{t("removeExpired")},500)}},mutations:{addToast(t,e){t.toasts.unshift(e)},removeExpired(t){t.toasts=t.toasts.filter(t=>t.lifetime>ue()())}}},he={namespaced:!0,actions:{async start({dispatch:t},e){try{await window.axios.post(`v1/measurements/${e}/start`)}catch(s){return t("toasts/error",s,{root:!0}),!1}return!0},async stop({dispatch:t},e){try{await window.axios.post(`v1/measurements/${e}/stop`)}catch(s){return t("toasts/error",s,{root:!0}),!1}return!0}}},fe={namespaced:!0,state:{now:"1970-01-01 00:00:00",activeDate:"1970-01-01 00:00:00"},actions:{async fetch({commit:t}){try{let e=await window.axios.get("v1/time/now");t("setActualTime",e.data.data)}catch(e){console.error("Could not fetch actual server time")}}},mutations:{setActualTime(t,e){t.now=e},addSecond(t){t.now=ue()(t.now).add(1,"seconds").format("YYYY-MM-DD HH:mm:ss")},setActiveDate(t,e){t.activeDate=e}}},ve={namespaced:!0,state:{activePeriod:{startDate:"",endDate:""},activeStep:"days"},actions:{setActivePeriod({commit:t,state:e},s){t("setActivePeriod",{startDate:ue()(e.activePeriod.startDate).startOf(s).format("YYYY-MM-DD HH:mm:ss"),endDate:ue()(e.activePeriod.startDate).endOf(s).format("YYYY-MM-DD HH:mm:ss")})},next({commit:t,state:e}){let s={};s.startDate=ue()(e.activePeriod.startDate).add(1,e.activeStep).format("YYYY-MM-DD HH:mm:ss"),s.endDate=ue()(e.activePeriod.endDate).add(1,e.activeStep).format("YYYY-MM-DD HH:mm:ss"),t("setActivePeriod",s)},previous({commit:t,state:e}){let s={};s.startDate=ue()(e.activePeriod.startDate).subtract(1,e.activeStep).format("YYYY-MM-DD HH:mm:ss"),s.endDate=ue()(e.activePeriod.endDate).subtract(1,e.activeStep).format("YYYY-MM-DD HH:mm:ss"),t("setActivePeriod",s)}},mutations:{setActivePeriod(t,{startDate:e,endDate:s}){t.activePeriod.startDate=e,t.activePeriod.endDate=s},setActiveStep(t,e){t.activeStep=e}},getters:{title:t=>{let e=(t,e)=>ue()(t).isSame(e,"day");return e(t.activePeriod.startDate,t.activePeriod.endDate)?ue()(t.activePeriod.startDate).calendar(null,{sameDay:"[Today]",nextDay:"[Tommorow]",lastDay:"[Yesterday]",tuesday:"[Tuesday]",nextWeek:"dddd",lastWeek:"[Last] dddd"}):ue()(t.activePeriod.startDate).format("YYYY-MM-DD")+" - "+ue()(t.activePeriod.endDate).format("YYYY-MM-DD")}}};a["a"].use(Zt["a"]);const be=new Zt["a"].Store({modules:{auth:ie,user:le,timeMeters:de,plans:me,toasts:pe,measurements:he,time:fe,view:ve}});var ge=be;const we=s("c1df");a["a"].use(c["a"]),a["a"].use(s("2ead"),{moment:we}),a["a"].component("v-select",h.a),a["a"].component("d-svg",y),a["a"].prototype.$bus=new a["a"],window.socket=new m.a("ed5340121001ba23bad9",{cluster:"eu",forceTLS:!0});let ye=s("bc3a");window.axios=ye.create({transformRequest:[function(t,e){return e["Authorization"]="Bearer "+localStorage.getItem("access_token"),JSON.stringify(t)}],headers:{"Content-Type":"application/json"},baseURL:"http://timmy.test"}),a["a"].prototype.$axios=window.axios,a["a"].config.productionTip=!1;const je=new c["a"]({routes:ne});function xe(t,e,s){const a=e[s];return a?(...r)=>{t.next(...r);const o=xe(t,e,s+1);a({...t,next:o})}:t.next}window.router=je,je.beforeEach((t,e,s)=>{if(t.meta.middleware){const a=Array.isArray(t.meta.middleware)?t.meta.middleware:[t.meta.middleware],r={from:e,next:s,router:je,to:t},o=xe(r,a,1);return a[0]({...r,next:o})}return s()}),new a["a"]({render:t=>t(d),router:je,store:ge}).$mount("#app")},6156:function(t,e,s){},"85ec":function(t,e,s){},aaef:function(t,e,s){"use strict";var a=s("34f6"),r=s.n(a);r.a},ea57:function(t,e,s){}});
//# sourceMappingURL=app.87afd3bf.js.map